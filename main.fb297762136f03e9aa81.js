(()=>{"use strict";class e{constructor(e,t){this.name=e,this.points=t}}const t=new class{constructor(){this.messageOn=!1}renderEmptyMessage(){this.messageOn=!0;const e=this.resetScoreDisplay(),t=document.createElement("span");t.innerText="No winners yet in the Leaderboard. ",t.className="empty-message italic text-white";const s=document.createElement("span");s.innerText="ðŸ˜„ Go to Add score, or hit Refresh",s.className="text-white",e.append(t,s)}resetScoreDisplay=()=>{const e=document.getElementById("score-display");return e.innerHTML="",e};render(e){const t=this.resetScoreDisplay();e.forEach((e=>{const{id:s,name:r,points:n}=e,o=document.createElement("h3");o.classList="pl-3 even:bg-gray-300 even:text-black first:text-yellow-400 first:font-bold text-white",o.innerHTML=`<strong>${s}. </strong> ${r} :`;const c=document.createElement("span");c.classList="ml-2",c.textContent=n,o.appendChild(c),t.appendChild(o)}))}},s=new class{constructor(){this.scores=JSON.parse(localStorage.getItem("scores"))||[],this.url="https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/mkGSPgbjWHFivfwICGOV/"}addScore(e){this.addToAPI(this.url,e)}refresh=async()=>{this.scores=await this.refreshFromAPI(),this.sortScores(),this.saveLeaderboard(),t.render(this.scores)};addToAPI=async(e,{name:t,points:s})=>{await fetch(`${e}scores/`,{method:"POST",body:JSON.stringify({user:t,score:s}),headers:{"Content-Type":"application/json; charset=UTF-8"}})};refreshFromAPI(){return fetch(`${this.url}scores/`).then((e=>e.json())).then((({result:e})=>e.map((({score:e,user:t})=>({name:t,points:e})))))}sortScores(){this.scores=this.scores.map((({name:e,points:t},s)=>({id:s+1,name:e,points:t=+t}))).sort(((e,t)=>t.points-e.points)).map(((e,t)=>(e.id=t+1,e)))}getInput(){const{value:t}=document.getElementById("name"),{value:s}=document.getElementById("score");t.trim().length>0&&s.length>0&&(this.addScore(new e(t,s)),document.getElementById("name").value="",document.getElementById("score").value="")}isScoreBoardEmpty(){0===this.scores.length&&t.renderEmptyMessage()}saveLeaderboard(){localStorage.setItem("scores",JSON.stringify(this.scores))}};s.isScoreBoardEmpty();const{messageOn:r}=t;r||t.render(s.scores),document.querySelector(".add-score").onclick=()=>s.getInput(),document.querySelector(".refresh-btn").onclick=()=>s.refresh()})();